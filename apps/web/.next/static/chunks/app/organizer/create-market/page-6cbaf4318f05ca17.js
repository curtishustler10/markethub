(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[209],{8354:function(e,s,a){Promise.resolve().then(a.bind(a,5678))},5678:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return k}});var r=a(7573),t=a(7653),i=a(7754),l=a(3187),n=a(1998),c=a(5809),d=a(6113),o=a(132),u=a(4037),m=a(2958),h=a(5974);let p=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)(u.fC,{ref:s,className:(0,h.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",a),...t,children:(0,r.jsx)(u.z$,{className:(0,h.cn)("flex items-center justify-center text-current"),children:(0,r.jsx)(m.Z,{className:"h-4 w-4"})})})});p.displayName=u.fC.displayName;var x=a(1250),g=a(2988),f=a(7631),j=a(3972),v=a(1871),y=a(8577),N=a(2875),b=a(7659);function k(){let[e,s]=(0,t.useState)(!1),{toast:a}=(0,x.pm)(),u=(0,i.useRouter)(),[m,h]=(0,t.useState)({name:"",description:"",address:"",city:"",state:"",postcode:"",country:"Australia",lat:"",lng:"",amenities:{parking:!1,toilets:!1,power:!1,water:!1,waste_disposal:!1,security:!1,first_aid:!1,storage:!1},requirements:{public_liability:!1,food_licence:!1,business_registration:!1,product_insurance:!1}}),k=(e,s)=>{h(a=>({...a,[e]:s}))},C=(e,s)=>{h(a=>({...a,amenities:{...a.amenities,[e]:s}}))},w=(e,s)=>{h(a=>({...a,requirements:{...a.requirements,[e]:s}}))},_=async e=>{e.preventDefault(),s(!0);try{let e={...m,lat:m.lat?parseFloat(m.lat):null,lng:m.lng?parseFloat(m.lng):null},s=await fetch("/api/markets",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await s.json();if(!s.ok)throw Error(r.error||"Failed to create market");a({title:"Market created!",description:"".concat(m.name," has been successfully created.")}),u.push("/organizer/markets")}catch(e){a({title:"Error",description:e.message||"Failed to create market",variant:"destructive"})}finally{s(!1)}};return(0,r.jsx)(N.r,{children:(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)(l.z,{variant:"ghost",size:"sm",asChild:!0,children:(0,r.jsxs)(b.default,{href:"/organizer/markets",children:[(0,r.jsx)(g.Z,{className:"w-4 h-4 mr-2"}),"Back to Markets"]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold tracking-tight",children:"Create New Market"}),(0,r.jsx)("p",{className:"text-muted-foreground",children:"Set up your farmers market to start accepting vendor applications."})]})]}),(0,r.jsxs)("form",{onSubmit:_,className:"space-y-8",children:[(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(f.Z,{className:"w-5 h-5"}),"Basic Information"]}),(0,r.jsx)(d.SZ,{children:"Provide the essential details about your market."})]}),(0,r.jsxs)(d.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"name",children:"Market Name *"}),(0,r.jsx)(n.I,{id:"name",placeholder:"e.g., Brisbane Riverside Farmers Market",value:m.name,onChange:e=>k("name",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"state",children:"State *"}),(0,r.jsxs)("select",{id:"state",className:"w-full px-3 py-2 border border-input bg-background rounded-md text-sm",value:m.state,onChange:e=>k("state",e.target.value),required:!0,children:[(0,r.jsx)("option",{value:"",children:"Select state..."}),[{value:"NSW",label:"New South Wales"},{value:"VIC",label:"Victoria"},{value:"QLD",label:"Queensland"},{value:"WA",label:"Western Australia"},{value:"SA",label:"South Australia"},{value:"TAS",label:"Tasmania"},{value:"ACT",label:"Australian Capital Territory"},{value:"NT",label:"Northern Territory"}].map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"description",children:"Description *"}),(0,r.jsx)(c.g,{id:"description",placeholder:"Describe your market, what makes it special, and what vendors/visitors can expect...",value:m.description,onChange:e=>k("description",e.target.value),rows:4,required:!0})]})]})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(j.Z,{className:"w-5 h-5"}),"Location Details"]}),(0,r.jsx)(d.SZ,{children:"Help vendors and visitors find your market."})]}),(0,r.jsxs)(d.aY,{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"address",children:"Street Address *"}),(0,r.jsx)(n.I,{id:"address",placeholder:"e.g., 123 Main Street or Brisbane City Park",value:m.address,onChange:e=>k("address",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"city",children:"City/Suburb *"}),(0,r.jsx)(n.I,{id:"city",placeholder:"e.g., Brisbane",value:m.city,onChange:e=>k("city",e.target.value),required:!0})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"postcode",children:"Postcode"}),(0,r.jsx)(n.I,{id:"postcode",placeholder:"e.g., 4000",value:m.postcode,onChange:e=>k("postcode",e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"country",children:"Country"}),(0,r.jsx)(n.I,{id:"country",value:m.country,onChange:e=>k("country",e.target.value),disabled:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"lat",children:"Latitude (Optional)"}),(0,r.jsx)(n.I,{id:"lat",type:"number",step:"any",placeholder:"e.g., -27.4698",value:m.lat,onChange:e=>k("lat",e.target.value)})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(o._,{htmlFor:"lng",children:"Longitude (Optional)"}),(0,r.jsx)(n.I,{id:"lng",type:"number",step:"any",placeholder:"e.g., 153.0251",value:m.lng,onChange:e=>k("lng",e.target.value)})]})]}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"\uD83D\uDCA1 Tip: You can find coordinates by searching your location on Google Maps and clicking to get lat/lng coordinates."})]})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(v.Z,{className:"w-5 h-5"}),"Market Amenities"]}),(0,r.jsx)(d.SZ,{children:"Select the facilities available at your market."})]}),(0,r.jsx)(d.aY,{children:(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries({parking:"Parking Available",toilets:"Public Toilets",power:"Power Supply",water:"Water Access",waste_disposal:"Waste Disposal",security:"Security",first_aid:"First Aid",storage:"Storage Facilities"}).map(e=>{let[s,a]=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{id:s,checked:m.amenities[s],onCheckedChange:e=>C(s,e)}),(0,r.jsx)(o._,{htmlFor:s,className:"text-sm font-normal",children:a})]},s)})})})]}),(0,r.jsxs)(d.Zb,{children:[(0,r.jsxs)(d.Ol,{children:[(0,r.jsxs)(d.ll,{className:"flex items-center gap-2",children:[(0,r.jsx)(y.Z,{className:"w-5 h-5"}),"Vendor Requirements"]}),(0,r.jsx)(d.SZ,{children:"Select the documents/certifications vendors need to participate."})]}),(0,r.jsx)(d.aY,{children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries({public_liability:"Public Liability Insurance",food_licence:"Food Handling License",business_registration:"Business Registration",product_insurance:"Product Insurance"}).map(e=>{let[s,a]=e;return(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(p,{id:s,checked:m.requirements[s],onCheckedChange:e=>w(s,e)}),(0,r.jsx)(o._,{htmlFor:s,className:"text-sm font-normal",children:a})]},s)})})})]}),(0,r.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,r.jsx)(l.z,{type:"button",variant:"outline",asChild:!0,children:(0,r.jsx)(b.default,{href:"/organizer/markets",children:"Cancel"})}),(0,r.jsx)(l.z,{type:"submit",disabled:e,children:e?"Creating Market...":"Create Market"})]})]})]})})}},6113:function(e,s,a){"use strict";a.d(s,{Ol:function(){return n},SZ:function(){return d},Zb:function(){return l},aY:function(){return o},ll:function(){return c}});var r=a(7573),t=a(7653),i=a(5974);let l=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("rounded-xl border bg-card text-card-foreground shadow-sm",a),...t})});l.displayName="Card";let n=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",a),...t})});n.displayName="CardHeader";let c=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("h3",{ref:s,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",a),...t})});c.displayName="CardTitle";let d=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("p",{ref:s,className:(0,i.cn)("text-sm text-muted-foreground",a),...t})});d.displayName="CardDescription";let o=t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("p-6 pt-0",a),...t})});o.displayName="CardContent",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center p-6 pt-0",a),...t})}).displayName="CardFooter",t.forwardRef((e,s)=>{let{className:a,...t}=e;return(0,r.jsx)("div",{ref:s,className:(0,i.cn)("flex items-center justify-end",a),...t})}).displayName="CardAction"}},function(e){e.O(0,[469,271,944,931,45,293,286,744],function(){return e(e.s=8354)}),_N_E=e.O()}]);