"use strict";(()=>{var e={};e.id=1608,e.ids=[1608],e.modules={72934:e=>{e.exports=require("next/dist/client/components/action-async-storage.external.js")},54580:e=>{e.exports=require("next/dist/client/components/request-async-storage.external.js")},45869:e=>{e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},13685:e=>{e.exports=require("http")},95687:e=>{e.exports=require("https")},85477:e=>{e.exports=require("punycode")},12781:e=>{e.exports=require("stream")},35034:e=>{e.exports=require("url")},59796:e=>{e.exports=require("zlib")},84415:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>h,patchFetch:()=>g,requestAsyncStorage:()=>l,routeModule:()=>d,serverHooks:()=>x,staticGenerationAsyncStorage:()=>m});var o={};t.r(o),t.d(o,{POST:()=>c,dynamic:()=>u});var s=t(63036),a=t(5736),i=t(15262),n=t(60942),p=t(53244);let u="force-dynamic";async function c(e){try{let{userId:r,role:t,recordId:o}=await e.json();if(!r||!t||!o)return n.NextResponse.json({error:"Missing parameters"},{status:400});let s=(0,p.m)(),a="market_organizer"===t?"imported_markets":"imported_vendors",{data:i,error:u}=await s.from(a).select("*").eq("id",o).single();if(u||!i)return n.NextResponse.json({error:"Record not found"},{status:404});if("vendor"===t){let{error:e}=await s.from("profiles").upsert({id:r,name:i.name,email:i.email,phone:i.phone,role:"vendor"},{onConflict:"id"});if(e)throw e}else{let{error:e}=await s.from("markets").update({owner_id:r}).eq("id",o);if(e)throw e}return await s.from(a).delete().eq("id",o),await s.from("claim_audit_logs").insert({user_id:r,target_type:"vendor"===t?"vendor":"market",target_id:o}),n.NextResponse.json({success:!0})}catch(e){return console.error("Error claiming imported record:",e),n.NextResponse.json({error:"Claim failed"},{status:500})}}let d=new s.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/auth/claim/route",pathname:"/api/auth/claim",filename:"route",bundlePath:"app/api/auth/claim/route"},resolvedPagePath:"/Users/gwendolyn/Downloads/markethub/apps/web/app/api/auth/claim/route.ts",nextConfigOutput:"",userland:o}),{requestAsyncStorage:l,staticGenerationAsyncStorage:m,serverHooks:x}=d,h="/api/auth/claim/route";function g(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:m})}},53244:(e,r,t)=>{t.d(r,{e:()=>a,m:()=>i});var o=t(76994),s=t(9362);function a(){let e=(0,s.cookies)();return(0,o.lx)("https://wpawqkvfcwbocliwbcaq.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwYXdxa3ZmY3dib2NsaXdiY2FxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU1MjE5NTcsImV4cCI6MjA3MTA5Nzk1N30.RNhc1X4blqoXbgUpeJV-A_hVgWYQIVa0wTk40j-FDgo",{cookies:{get:r=>e.get(r)?.value,set(r,t,o){e.set({name:r,value:t,...o})},remove(r,t){e.set({name:r,value:"",...t})}}})}function i(){return(0,o.lx)("https://wpawqkvfcwbocliwbcaq.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{cookies:{get(){},set(){},remove(){}}})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),o=r.X(0,[4522,3515,942,7193],()=>t(84415));module.exports=o})();